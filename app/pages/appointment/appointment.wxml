<!-- pages/appointment/appointment.wxml -->
<view class="container">
	<view wx:if="{{message}}" class="msg">{{message}}</view>

	<view wx:if="{{loading}}" class="loading">加载中...</view>

	<block wx:if="{{!loading}}">
				<block wx:for="{{ordersList}}" wx:key="id">
						<view class="item">
						<view style="display:flex;justify-content:space-between;align-items:center;">
							<text class="item-title">{{item.doctor && item.doctor.name ? item.doctor.name : ('医生#' + item.doctor_id)}}{{ item.doctor && item.doctor.department_name ? (' / ' + item.doctor.department_name) : ''}}</text>
			  <text wx:if="{{item.available===true}}" class="badge available">有号源</text>
			  <text wx:elif="{{item.available===false}}" class="badge reserved">无号源</text>
			  <text wx:elif="{{item.status==='expired'}}" class="badge expired">已过期</text>
			</view>
				<text class="item-sub">{{item.date}}  {{item.slot}}</text>
												<!-- 取消候补位置显示 -->

				<view class="actions">
					<button data-orderid="{{item.id}}" bindtap="onGoRegister" class="primary" wx:if="{{item.available===true}}">去挂号</button>
					<button data-orderid="{{item.id}}" bindtap="onCancel" class="danger" wx:if="{{item.status!=='expired'}}">取消预约</button>
				</view>
			</view>
		</block>

				<view wx:if="{{!ordersList || ordersList.length === 0}}" class="empty">暂无预约记录</view>
	</block>

</view>