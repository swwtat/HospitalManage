<view class="container">

<view class="header">
  <text class="title">ä¸ªäººæ¡£æ¡ˆ</text>
</view>

<view wx:if="{{hasProfile && !editMode}}" class="profile-card">
  <view class="profile-header">
    <text class="profile-role">{{role === 'student' ? 'å­¦ç”Ÿæ¡£æ¡ˆ' : 'æ•™èŒå·¥æ¡£æ¡ˆ'}}</text>
    <button class="edit-btn" bindtap="enterEditMode">ç¼–è¾‘æ¡£æ¡ˆ</button>
  </view>
  
  <view class="info-grid">
    <view class="info-item"><text class="info-label">èº«ä»½ï¼š</text><text class="info-value">{{role === 'student' ? 'å­¦ç”Ÿ' : 'æ•™èŒå·¥'}}</text></view>
    <view class="info-item"><text class="info-label">{{role === 'student' ? 'å­¦å·' : 'å·¥å·'}}ï¼š</text><text class="info-value">{{idNumber}}</text></view>
    <view class="info-item"><text class="info-label">å§“åï¼š</text><text class="info-value">{{name}}</text></view>
    <view class="info-item"><text class="info-label">èº«ä»½è¯å·ï¼š</text><text class="info-value">{{idCard}}</text></view>
    <view class="info-item"><text class="info-label">ç”µè¯å·ï¼š</text><text class="info-value">{{phone}}</text></view>
    <view class="info-item"><text class="info-label">æ€§åˆ«ï¼š</text><text class="info-value">{{gender}}</text></view>
  </view>
  
  <view class="history-block">
    <text class="info-label">æ—¢å¾€ç—…å²ï¼š</text>
    <view class="history-content">{{history || 'æ— '}}</view>
  </view>
</view>

<view wx:else class="form-card">

  <view class="tab-bar">
    <view 
      class="tab-item {{role === 'student' ? 'active' : ''}}" 
      bindtap="switchToStudent">
      å­¦ç”Ÿ
    </view>
    <view 
      class="tab-item {{role === 'teacher' ? 'active' : ''}}" 
      bindtap="switchToTeacher">
      æ•™èŒå·¥
    </view>
  </view>

  <view class="input-group">
    <text class="label">ğŸ’¼</text>     <input class="input" value="{{idNumber}}" placeholder="è¯·è¾“å…¥{{role === 'student' ? 'å­¦å·' : 'å·¥å·'}}" bindinput="onIDInput" />
    <text class="input-label-text">{{role === 'student' ? 'å­¦å·' : 'å·¥å·'}}</text>   </view>

  <view class="input-group">
    <text class="label">ğŸ‘¤</text>
    <input class="input" value="{{name}}" placeholder="è¯·è¾“å…¥å§“å" bindinput="onNameInput" />
    <text class="input-label-text">å§“å</text>
  </view>

  <view class="input-group">
    <text class="label">ğŸ†”</text>
    <input class="input" value="{{idCard}}" placeholder="è¯·è¾“å…¥èº«ä»½è¯å·" bindinput="onIDCardInput" />
    <text class="input-label-text">èº«ä»½è¯å·</text>
  </view>
  
   <view class="input-group">
    <text class="label">ğŸ“</text>
    <input class="input" value="{{phone}}" placeholder="è¯·è¾“å…¥ç”µè¯å·" bindinput="onTelInput" />
    <text class="input-label-text">ç”µè¯å·</text>
  </view>

  <view class="input-group">
    <text class="label">ğŸš»</text>
    <picker mode="selector" range="{{genderOptions}}" bindchange="onGenderChange">
      <view class="picker">{{gender || 'è¯·é€‰æ‹©æ€§åˆ«'}}</view>
    </picker>
    <text class="input-label-text">æ€§åˆ«</text>
  </view>

  <view class="input-group textarea-group">
    <text class="label textarea-label-icon">ğŸ©º</text>
    <textarea class="textarea" value="{{history}}" placeholder="è¯·å¡«å†™ä¸»è¦ç—…å²æˆ–å¥åº·çŠ¶å†µ" bindinput="onHistoryInput"></textarea>
    <text class="input-label-text">æ—¢å¾€ç—…å²</text>
  </view>

  <button class="submit-btn" bindtap="onSubmit">ä¿å­˜ä¿¡æ¯</button>
</view>

</view>