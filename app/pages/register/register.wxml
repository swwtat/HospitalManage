<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="main-title">智能挂号服务</text>
    <text class="sub-title">一步完成您的就诊预约</text>
  </view>

  <!-- 科室选择卡片 -->
  <view class="card">
    <text class="card-title">科室选择</text>
    <view class="card-content">
      <button class="action-btn" bindtap="goToDepartment">选择科室</button>
      <picker mode="selector" range="{{departments}}" bindchange="onDeptChange" disabled="true">
        <view class="picker-display">{{selectedDept.name || '请选择科室'}}</view>
      </picker>
    </view>
  </view>

  <!-- 医生选择卡片 -->
  <view class="card">
    <text class="card-title">医生选择</text>
    <view class="card-content">
      <picker mode="selector" range="{{doctors}}" range-key="name" bindchange="onDoctorChange">
        <view class="picker-display">{{selectedDoctor.name || '请选择医生'}}</view>
      </picker>
    </view>
  </view>

  <!-- 号别选择卡片 -->
  <view class="card">
    <text class="card-title">号别选择</text>
    <view class="card-content">
      <picker mode="selector" range="{{registerRange}}" bindchange="onRegiChange">
        <view class="picker-display">{{selectedRegi || '请选择号别'}}</view>
      </picker>
      <block wx:if="{{availableTypesList && availableTypesList.length}}">
        <text class="sub-note">可用号源：</text>
        <view class="types">
          <block wx:for="{{availableTypesList}}" wx:key="type">
            <view class="type-item">{{item.type}}: {{item.count}}</view>
          </block>
        </view>
      </block>
    </view>
  </view>

  <!-- 日期与时间选择 -->
  <view class="card">
    <text class="card-title">就诊日期与时间</text>
    <view class="card-content">
  <register-date-picker availability="{{availability}}" regiType="{{selectedRegiKey}}" bind:timeSelected="onTimeSelected" />
    </view>
  </view>

  <!-- 挂号按钮 -->
  <button class="register-btn" bindtap="register">立即挂号</button>

  <!-- 消息提示 -->
  <view wx:if="{{message}}" class="message">{{message}}</view>
</view>
